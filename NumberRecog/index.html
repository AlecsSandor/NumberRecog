<!DOCTYPE html>
<html>
<title>*Simple number recognition*</title>
<head>
  <script src="http://d3js.org/d3.v4.min.js"></script>
  <script src="http://dimplejs.org/dist/dimple.v2.3.0.min.js"></script>
</head>
<body>

<style type="text/css">

	img {
    display: none;
}

  canvas {
    display: none;
  }

  #wrapper {
    display: none;
  }

  #myCanvasb {
    display: block;
  }


</style>

<div id="wrapper">

<canvas id="myCanvas1" width="100" height="100" style="border:1px solid #d3d3d3;"></canvas>
<img id="img1" src="references/one.jpg">
<canvas id="myCanvas2" width="100" height="100" style="border:1px solid #d3d3d3;"></canvas>
<img id="img2" src="references/two.jpg">
<canvas id="myCanvas22" width="100" height="100" style="border:1px solid #d3d3d3;"></canvas>
<img id="img22" src="references/two2.jpg">
<canvas id="myCanvas3" width="100" height="100" style="border:1px solid #d3d3d3;"></canvas>
<img id="img3" src="references/three.jpg">
<canvas id="myCanvas4" width="100" height="100" style="border:1px solid #d3d3d3;"></canvas>
<img id="img4" src="references/four.jpg">
<canvas id="myCanvas5" width="100" height="100" style="border:1px solid #d3d3d3;"></canvas>
<img id="img5" src="references/five.jpg">
<canvas id="myCanvas6" width="100" height="100" style="border:1px solid #d3d3d3;"></canvas>
<img id="img6" src="references/six.jpg">
<canvas id="myCanvas7" width="100" height="100" style="border:1px solid #d3d3d3;"></canvas>
<img id="img7" src="references/seven.jpg">
<canvas id="myCanvas8" width="100" height="100" style="border:1px solid #d3d3d3;"></canvas>
<img id="img8" src="references/eight.jpg">
<canvas id="myCanvas9" width="100" height="100" style="border:1px solid #d3d3d3;"></canvas>
<img id="img9" src="references/nine.jpg">

<canvas id="myCanvasb" width="100" height="100" style="border:1px solid #d3d3d3;"></canvas>

<input type="file" id="inp">

<script>

  window.onload=function() {
    document.getElementById('wrapper').style.display='block';
}

document.getElementById('inp').onchange = function(e) {
  var img = new Image();
  img.onload = draw;
  img.onerror = failed;
  img.src = URL.createObjectURL(this.files[0]);
};
function draw() {
  var canvas = document.getElementById('myCanvasb');
  canvas.width = 100;
  canvas.height = 100;
  var ctb = canvas.getContext('2d');
  ctb.drawImage(this, 0,0);
}
function failed() {
  console.error("The provided file couldn't be loaded as an Image media");
}
 

var dif1 = 0;
var dif2 = 0;
var dif3 = 0;
var dif4 = 0;
var dif5 = 0;
var dif6 = 0;
var dif7 = 0;
var dif8 = 0;
var dif9 = 0;

var c = document.getElementById("myCanvas1");
var ct1 = c.getContext("2d");

var d = document.getElementById("myCanvas2");
var ct2 = d.getContext("2d");
var d2 = document.getElementById("myCanvas22");
var ct22 = d2.getContext("2d");

var e = document.getElementById("myCanvas3");
var ct3 = e.getContext("2d");

var f = document.getElementById("myCanvas4");
var ct4 = f.getContext("2d");

var g = document.getElementById("myCanvas5");
var ct5 = g.getContext("2d");

var h = document.getElementById("myCanvas6");
var ct6 = h.getContext("2d");

var o = document.getElementById("myCanvas7");
var ct7 = o.getContext("2d");

var l = document.getElementById("myCanvas8");
var ct8 = l.getContext("2d");

var r = document.getElementById("myCanvas9");
var ct9 = r.getContext("2d");

var b = document.getElementById("myCanvasb");
var ctb = b.getContext("2d");

var img1 = document.getElementById("img1");
ct1.drawImage(img1, 0, 0);
var img2 = document.getElementById("img2");
ct2.drawImage(img2, 0, 0);
var img22 = document.getElementById("img22");
ct22.drawImage(img22, 0, 0);
var img3 = document.getElementById("img3");
ct3.drawImage(img3, 0, 0);
var img4 = document.getElementById("img4");
ct4.drawImage(img4, 0, 0);
var img5 = document.getElementById("img5");
ct5.drawImage(img5, 0, 0);
var img6 = document.getElementById("img6");
ct6.drawImage(img6, 0, 0);
var img7 = document.getElementById("img7");
ct7.drawImage(img7, 0, 0);
var img8 = document.getElementById("img8");
ct8.drawImage(img8, 0, 0);
var img9 = document.getElementById("img9");
ct9.drawImage(img9, 0, 0);

/*
var imgtofind = document.getElementById("imgtofind");
ctb.drawImage(imgtofind, 0, 0);
*/

function check() {	
  var imgData1 = ct1.getImageData(0,0,100, 100);
  var imgData2 = ct2.getImageData(0,0,100, 100);
  var imgData22 = ct22.getImageData(0,0,100, 100);
  var imgData3 = ct3.getImageData(0,0,100, 100);
  var imgData4 = ct4.getImageData(0,0,100, 100);
  var imgData5 = ct5.getImageData(0,0,100, 100);
  var imgData6 = ct6.getImageData(0,0,100, 100);
  var imgData7 = ct7.getImageData(0,0,100, 100);
  var imgData8 = ct8.getImageData(0,0,100, 100);
  var imgData9 = ct9.getImageData(0,0,100, 100);

  var imgDatab = ctb.getImageData(0,0,100, 100);
 	for (var i = 0; i<40000; i++) { 
        if (imgData1.data[i] != imgDatab.data[i]) {
          dif1++;
        }

        if ((imgData2.data[i] != imgDatab.data[i]) && (imgData22.data[i] != imgDatab.data[i])) {
          dif2++;
        }
        else 
        if (((imgData2.data[i] != imgDatab.data[i]) && (imgData22.data[i] == imgDatab.data[i])) || ((imgData22.data[i] != imgDatab.data[i]) && (imgData2.data[i] == imgDatab.data[i]))) {
            dif2 = dif2 + 0.5;
        }

        if (imgData3.data[i] != imgDatab.data[i]) {
          dif3++;
        }

        if (imgData4.data[i] != imgDatab.data[i]) {
          dif4++;
        }

        if (imgData5.data[i] != imgDatab.data[i]) {
          dif5++;
        }

        if (imgData6.data[i] != imgDatab.data[i]) {
          dif6++;
        }

        if (imgData7.data[i] != imgDatab.data[i]) {
          dif7++;
        }

        if (imgData8.data[i] != imgDatab.data[i]) {
          dif8++;
        }

        if (imgData9.data[i] != imgDatab.data[i]) {
          dif9++;
        }
     }

    var rez = (Math.min(dif1, dif2, dif3, dif4, dif5, dif6, dif7, dif8, dif9)); 

    if (rez == dif1) {document.getElementById("rezult").innerHTML = "Number 1";}
    else 
    if (rez == dif2) {document.getElementById("rezult").innerHTML = "Number 2";}
    else
    if (rez == dif3) {document.getElementById("rezult").innerHTML = "Number 3";}
    else
    if (rez == dif4) {document.getElementById("rezult").innerHTML = "Number 4";}
    else
    if (rez == dif5) {document.getElementById("rezult").innerHTML = "Number 5";}
    else
    if (rez == dif6) {document.getElementById("rezult").innerHTML = "Number 6";}
    else
    if (rez == dif7) {document.getElementById("rezult").innerHTML = "Number 7";}
    else
    if (rez == dif8) {document.getElementById("rezult").innerHTML = "Number 8";}
    else
    if (rez == dif9) {document.getElementById("rezult").innerHTML = "Number 9";}

  dif1 = 40000-dif1;
  dif1 = dif1*100/40000;
  dif2 = 40000-dif2;
  dif2 = dif2*100/40000;
  dif3 = 40000-dif3;
  dif3 = dif3*100/40000;
  dif4 = 40000-dif4;
  dif4 = dif4*100/40000;
  dif5 = 40000-dif5;
  dif5 = dif5*100/40000;
  dif6 = 40000-dif6;
  dif6 = dif6*100/40000;
  dif7 = 40000-dif7;
  dif7 = dif7*100/40000;
  dif8 = 40000-dif8;
  dif8 = dif8*100/40000;
  dif9 = 40000-dif9;
  dif9 = dif9*100/40000;


var svg = dimple.newSvg("body", 800, 600);
    var data = [
      { "Number":"Number 1", "Percentage":dif1 },
      { "Number":"Number 2", "Percentage":dif2 },
      { "Number":"Number 3", "Percentage":dif3 },
      { "Number":"Number 4", "Percentage":dif4 },
      { "Number":"Number 5", "Percentage":dif5 },
      { "Number":"Number 6", "Percentage":dif6 },
      { "Number":"Number 7", "Percentage":dif7 },
      { "Number":"Number 8", "Percentage":dif8 },
      { "Number":"Number 9", "Percentage":dif9 }
    
    ];
    var chart = new dimple.chart(svg, data);
    chart.addCategoryAxis("x", "Number");
    chart.addMeasureAxis("y", "Percentage");
    chart.addSeries(null, dimple.plot.bar);
    chart.draw();

  }

</script>

<button onclick="check()">check</button>
<div id="rezult"></div>


<div id="chart" style="width:90%;height:250px;"></div>

</div>

</body>
</html>